{"ast":null,"code":"import _asyncToGenerator from\"/Users/deepakrajmohanraj/Desktop/UB/portfolio-website/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _regeneratorRuntime from\"/Users/deepakrajmohanraj/Desktop/UB/portfolio-website/node_modules/@babel/runtime/regenerator/index.js\";import{useRef}from'react';import{auth,storage,db}from'../../firebase';import{ref,uploadBytes,getDownloadURL}from'firebase/storage';import{addDoc}from'firebase/firestore';import{collection}from'firebase/firestore/lite';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Home=function Home(){var form=useRef();var submitPortfolio=function submitPortfolio(e){var _form$current$,_form$current$2,_form$current$3,_form$current$4;e.preventDefault();var name=(_form$current$=form.current[0])===null||_form$current$===void 0?void 0:_form$current$.value;var description=(_form$current$2=form.current[1])===null||_form$current$2===void 0?void 0:_form$current$2.value;var url=(_form$current$3=form.current[2])===null||_form$current$3===void 0?void 0:_form$current$3.value;var image=(_form$current$4=form.current[3])===null||_form$current$4===void 0?void 0:_form$current$4.files[0];var storageRef=ref(storage,\"portfolio/\".concat(image.name));uploadBytes(storageRef,image).then(function(snapshot){getDownloadURL(snapshot.ref).then(function(downloadUrl){savePortfolio({name:name,description:description,url:url,image:downloadUrl});},function(error){console.log(error);savePortfolio({name:name,description:description,url:url,image:null});});},function(error){console.log(error);savePortfolio({name:name,description:description,url:url,image:null});});};var savePortfolio=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(portfolio){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return addDoc(collection(db,'portfolio'),portfolio);case 3:window.location.reload(false);_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);alert('Failed to add portfolio');case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));return function savePortfolio(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"form\",{ref:form,onSubmit:submitPortfolio,children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Name\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Description\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Url\"})}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"input\",{type:\"file\",placeholder:\"Image\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Submit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return auth.signOut();},children:\"Sign out\"})]})});};export default Home;","map":{"version":3,"sources":["/Users/deepakrajmohanraj/Desktop/UB/portfolio-website/src/components/Dashboard/home.js"],"names":["useRef","auth","storage","db","ref","uploadBytes","getDownloadURL","addDoc","collection","Home","form","submitPortfolio","e","preventDefault","name","current","value","description","url","image","files","storageRef","then","snapshot","downloadUrl","savePortfolio","error","console","log","portfolio","window","location","reload","alert","signOut"],"mappings":"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","sourcesContent":["import { useRef } from 'react';\nimport { auth, storage, db } from '../../firebase';\nimport { ref, uploadBytes, getDownloadURL } from 'firebase/storage';\nimport { addDoc } from 'firebase/firestore';\nimport { collection } from 'firebase/firestore/lite';\n\n\nconst Home = () => {\n    const form = useRef();\n\n    const submitPortfolio = (e) => {\n        e.preventDefault();\n        const name = form.current[0]?.value;\n        const description = form.current[1]?.value;\n        const url = form.current[2]?.value;\n        const image = form.current[3]?.files[0];\n\n        const storageRef = ref(storage, `portfolio/${image.name}`);\n\n        uploadBytes(storageRef, image).then(\n            (snapshot) => {\n                getDownloadURL(snapshot.ref).then((downloadUrl) => {\n                    savePortfolio({\n                        name,\n                        description,\n                        url,\n                        image: downloadUrl\n                    })\n                }, (error) => {\n                    console.log(error);\n                    savePortfolio({\n                        name,\n                        description,\n                        url,\n                        image: null\n                    })\n                })\n            }, (error) => {\n                console.log(error);\n                savePortfolio({\n                    name,\n                    description,\n                    url,\n                    image: null\n                })\n            }\n        )\n    }\n\n    const savePortfolio = async (portfolio) => {\n        try {\n            await addDoc(collection(db, 'portfolio'), portfolio);\n            window.location.reload(false);\n        } catch (error) {\n            alert('Failed to add portfolio');\n        }\n    }\n\n    return (\n        <div className=\"dashboard\">\n\n            <form ref={form} onSubmit={submitPortfolio}>\n                <p><input type=\"text\" placeholder=\"Name\" /></p>\n                <p><textarea placeholder=\"Description\" /></p>\n                <p><input type=\"text\" placeholder=\"Url\" /></p>\n                <p><input type=\"file\" placeholder=\"Image\" /></p>\n                <button type=\"submit\">Submit</button>\n                <button onClick={() => auth.signOut()}>Sign out</button>\n            </form>\n        </div>\n    )\n}\n\nexport default Home;"]},"metadata":{},"sourceType":"module"}